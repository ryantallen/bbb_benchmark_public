<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BBB Benchmark — Latest Results</title>
  <meta name="description" content="Public results for the Back Bay Battery (BBB) strategy benchmark. LLMs are evaluated on balancing short-term profit with longer-term growth; inputs are masked to avoid contamination so models encounter the simulation as if for the first time." />
  <meta property="og:title" content="BBB Benchmark — Latest Results" />
  <meta property="og:description" content="Strategy benchmark using the Back Bay Battery simulation. Masked inputs, composite scores, and cross-benchmark comparisons." />
  <meta property="og:type" content="website" />
  <style>
    /* ===== THEME ===== */
    :root {
      --bg: #ffffff;
      --fg: #0f172a;       /* slate-900 */
      --muted: #475569;    /* slate-600 */
      --card: #f8fafc;     /* slate-50 */
      --border: #e2e8f0;   /* slate-200 */
      --link: #2563eb;     /* blue-600 */
      --radius: 14px;
      color-scheme: light;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0b1020;
        --fg: #e5e7eb;
        --muted: #a3a3a3;
        --card: #121833;
        --border: #243050;
        --link: #60a5fa;
        color-scheme: dark;
      }
    }
    [data-theme="light"] {
      --bg: #ffffff; --fg: #0f172a; --muted:#475569; --card:#f8fafc; --border:#e2e8f0; --link:#2563eb;
      color-scheme: light;
    }
    [data-theme="dark"] {
      --bg:#0b1020; --fg:#e5e7eb; --muted:#a3a3a3; --card:#121833; --border:#243050; --link:#60a5fa;
      color-scheme: dark;
    }

    /* ===== LAYOUT & TYPE ===== */
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
      background: var(--bg);
      color: var(--fg);
      line-height: 1.55;
    }
    a { color: var(--link); text-decoration: none; }
    a:hover { text-decoration: underline; }
    main { max-width: 960px; margin: 0 auto; padding: 2rem 1.25rem 4rem; }
    header { margin-bottom: 1.25rem; display: flex; gap: 1rem; justify-content: space-between; align-items: center; }
    h1 { margin: 0; font-size: clamp(1.4rem, 2.6vw, 2rem); font-weight: 800; }
    .meta { font-size: .95rem; color: var(--muted); }
    .lead {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem 1rem;
      margin: 1rem 0 2rem;
    }
    .toolbar { display: flex; align-items: center; gap: .75rem; }
    .btn {
      border: 1px solid var(--border);
      background: transparent;
      color: var(--fg);
      border-radius: 999px;
      padding: .4rem .85rem;
      font-size: .95rem;
      cursor: pointer;
    }
    .btn:hover { background: var(--card); }
    .stack { display: grid; gap: 1.5rem; }
    /* Each plot becomes a vertically stacked "card" */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem;
    }
    .card h2 {
      margin: .25rem 0 .25rem;
      font-size: clamp(1.1rem, 2.2vw, 1.35rem);
      font-weight: 700;
    }
    .card .desc {
      margin: 0 0 .75rem 0;
      color: var(--muted);
      font-size: .98rem;
    }
    figure { margin: 0; }
    img { width: 100%; height: auto; border-radius: 10px; display: block; }
    figcaption { margin-top: .5rem; font-size: .92rem; color: var(--muted); }
    footer { margin-top: 2.5rem; color: var(--muted); font-size: .95rem; }
    .links { display: flex; flex-wrap: wrap; gap: .85rem; }

    /* Accessibility helpers for reduced motion users */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
    }
  </style>
</head>

<body>
  <main>
    <header>
      <div>
        <h1>BBB Benchmark</h1>
        <div class="meta">Last commit: <span id="last-run" aria-live="polite">…</span></div>
      </div>
      <div class="toolbar">
        <button id="theme-toggle" class="btn" type="button" aria-label="Toggle color theme">Toggle theme</button>
      </div>
    </header>

    <!-- Introductory copy appears before any images -->
    <section class="lead" aria-label="Benchmark overview">
      <p>
        The BBB benchmark evaluates the performance of large language models on the <a href = "https://hbsp.harvard.edu/product/8873-HTM-ENG">Back Bay Battery</a> strategy simulation.
      </p>
      <p>
        **<strong>Read the paper here: <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=5239555">How Well Can AI do Strategy? Empirical Benchmarking Using Strategy Simulations</a></strong>**
      </p>
      <p>
        **<strong>View the full Github Repo Here: <a href="https://github.com/ryantallen/bbb_benchmark_public">https://github.com/ryantallen/bbb_benchmark_public</a></strong>**
      </p>
      <p>
        The task of the simulation is to balance <em>short-term profit</em> (exploiting the core business) with <em>longer-term growth</em>
        (investing in an emerging technology) across multiple periods under significant uncertainty. To reduce contamination from model pre-knowledge of the simulation, all
        identifying terms are masked so each model encounters the scenario as if for the first time. 
        Results below show the composite score and underlying metrics, plus correlations with external benchmarks.
      </p>
    </section>

    <!-- Vertical, scroll-friendly plot stack -->
    <section class="stack" id="plots">
      <article class="card" id="card-composite">
        <h2>BBB Composite Score (ordered by release date)</h2>
        <p class="desc">Composite Score: even-weighted, min–max normalized combination of Cumulative Profit, Cumulative Revenue, and final-year Emerging Tech Revenue.</p>
        <figure>
          <img id="img-composite-time" alt="BBB composite score over time">
          <figcaption>Consistent model improvement until recent regression by the latest state-of-the-art models</figcaption>
        </figure>
      </article>

      <article class="card" id="card-composite">
        <h2>BBB Composite Score (ranked by performance)</h2>
        <p class="desc">Composite Score: even-weighted, min–max normalized combination of Cumulative Profit, Cumulative Revenue, and final-year Emerging Tech Revenue.</p>
        <figure>
          <img id="img-composite" alt="BBB composite score across models (masked, Advanced)">
          <figcaption>Because the simulation involves trade-offs between short-term profit and longer-term growth, the composite score combines the most important elements into a single view</figcaption>
        </figure>
      </article>

      <article class="card" id="card-raw">
        <h2>BBB Raw Metrics (ranked by performance)</h2>
        <p class="desc">Breakout of underlying outcomes to show the trade-offs that drive the composite.</p>
        <figure>
          <img id="img-raw" alt="Raw metrics 2×2 for BBB (masked, Advanced)">
          <figcaption>Cumulative Profit, Cumulative Revenue, Emerging Tech Revenue, are displayed to expose trade-offs in the simulation.</figcaption>
        </figure>
      </article>

      <article class="card" id="card-gpqa">
        <h2>BBB vs. GPQA</h2>
        <p class="desc">Relationship between strategy performance and PhD-level science benchmark accuracy (GPQA).</p>
        <figure>
          <img id="img-gpqa" alt="Scatter of BBB composite vs GPQA (masked, Advanced)">
          <figcaption>Shows relationship between scientific-reasoning gains and BBB strategic-decision making performance.</figcaption>
        </figure>
      </article>

      <article class="card" id="card-lmarena">
        <h2>BBB vs. LM Arena</h2>
        <p class="desc">Shows relationship between chat quality ratings (LM Arena) and BBB strategic-decision making performance.</p>
        <figure>
          <img id="img-lmarena" alt="Scatter of BBB composite vs LM Arena (masked, Advanced)">
          <figcaption>Compares human-rated chat quality to strategic outcomes in simulation.</figcaption>
        </figure>
      </article>
    </section>

    <footer>
      <div class="links">
        <span>Images auto-refresh from the repo’s <code>analysis/figures/</code> folder.</span>
        <a href="https://github.com/ryantallen/bbb_benchmark_public" rel="noopener">View repository</a>
        <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=5239555" rel="noopener">Read the paper</a>
      </div>
    </footer>
  </main>

  <noscript>
    <p style="padding:1rem">Note: JavaScript is required to show the latest images and last run date.</p>
  </noscript>

  <script>
    // ===== CONFIG =====
    const OWNER  = 'ryantallen';
    const REPO   = 'bbb_benchmark_public';
    const BRANCH = 'main';
    const RAW_BASE = `https://raw.githubusercontent.com/${OWNER}/${REPO}/${BRANCH}`;

    // Paths to analysis images
    const PATHS = {
      composite_over_time: 'analysis/figures/bbb_time_def_prop.png',
      composite: 'analysis/figures/bbb_comp_adv_def.png',
      raw:       'analysis/figures/bbb_2x2_adv_def.png',
      gpqa:      'analysis/figures/bbb_comp_gpqa_adv_def.png',
      lmarena:   'analysis/figures/bbb_comp_lma_adv_def.png'
    };

    // Map DOM ids to repo paths
    const IMG_MAP = {
      'img-composite-time': PATHS.composite_over_time,
      'img-composite': PATHS.composite,
      'img-raw': PATHS.raw,
      'img-gpqa': PATHS.gpqa,
      'img-lmarena': PATHS.lmarena
    };

    function setImageSrc(id, repoPath) {
      const el = document.getElementById(id);
      if (!el) return;
      const remoteUrl = `${RAW_BASE}/${repoPath}?v=${Date.now()}`; // cache-bust
      const localUrl  = `../${repoPath}`; // when viewing locally from /docs
      el.src = remoteUrl;
      el.onerror = () => {
        // Fallback to local path if remote not available (e.g., viewing file locally)
        el.onerror = null; // prevent loop
        el.src = localUrl;
      };
    }

    async function fetchLastCommitDate(path) {
      const url = `https://api.github.com/repos/${OWNER}/${REPO}/commits` +
        `?sha=${encodeURIComponent(BRANCH)}&path=${encodeURIComponent(path)}&per_page=1`;
      const res = await fetch(url, {
        headers: {
          'Accept': 'application/vnd.github+json',
          'X-GitHub-Api-Version': '2022-11-28'
        }
      });
      if (!res.ok) throw new Error(`GitHub API error ${res.status}`);
      const data = await res.json();
      const dt = data?.[0]?.commit?.committer?.date;
      return dt ? new Date(dt) : null;
    }

    function fmt(date) {
      try {
        return date.toLocaleString(undefined, { dateStyle: 'medium', timeStyle: 'short' });
      } catch {
        return date.toISOString();
      }
    }

    // Load images
    Object.entries(IMG_MAP).forEach(([id, repoPath]) => setImageSrc(id, repoPath));

    // Compute latest run from all image commit timestamps
    (async () => {
      try {
        const dates = await Promise.all(Object.values(PATHS).map(fetchLastCommitDate));
        const latest = dates.filter(Boolean).sort((a, b) => b - a)[0];
        document.getElementById('last-run').textContent = latest ? fmt(latest) : 'Unavailable';
      } catch (e) {
        console.error(e);
        document.getElementById('last-run').textContent = 'Unavailable';
      }
    })();

    // ===== THEME TOGGLE (auto / light / dark) =====
    (function themeInit(){
      const root = document.documentElement;
      const saved = localStorage.getItem('bbb-theme');
      if (saved === 'light' || saved === 'dark') root.setAttribute('data-theme', saved);
      else root.setAttribute('data-theme', 'auto');
      const btn = document.getElementById('theme-toggle');
      const next = { 'auto':'dark', 'dark':'light', 'light':'auto' };
      btn.addEventListener('click', () => {
        const cur = root.getAttribute('data-theme') || 'auto';
        const val = next[cur] || 'auto';
        root.setAttribute('data-theme', val);
        localStorage.setItem('bbb-theme', val);
        btn.textContent = `Theme: ${val}`;
      });
      btn.textContent = `Theme: ${root.getAttribute('data-theme')}`;
    })();
  </script>
</body>
</html>
